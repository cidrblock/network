---
merged:
  before:
    - name: "eth0"
      enable: true

    - name: "eth1"
      enable: true

    - name: "eth2"
      enable: true

  commands:
    - "set interfaces ethernet eth1 description 'Configured by Ansible - Interface 1'"
    - "set interfaces ethernet eth1 mtu '1500'"
    - "set interfaces ethernet eth1 duplex 'auto'"
    - "set interfaces ethernet eth1 speed 'auto'"
    - "set interfaces ethernet eth1 vif 100"
    - "set interfaces ethernet eth1 vif 100 description 'Eth1 - VIF 100'"
    - "set interfaces ethernet eth1 vif 100 mtu '400'"
    - "set interfaces ethernet eth1 vif 101"
    - "set interfaces ethernet eth1 vif 101 description 'Eth1 - VIF 101'"
    - "set interfaces ethernet eth2 description 'Configured by Ansible - Interface 2 (ADMIN DOWN)'"
    - "set interfaces ethernet eth2 mtu '600'"
    - "set interfaces ethernet eth2 disable"

  after:
    - name: "eth0"
      enable: true

    - name: "eth1"
      description: "Configured by Ansible - Interface 1"
      mtu: 1500
      speed: "auto"
      duplex: "auto"
      enable: true
      vifs:
        - vlan_id: "100"
          description: "Eth1 - VIF 100"
          mtu: 400
          enable: true

        - vlan_id: "101"
          description: "Eth1 - VIF 101"
          enable: true

    - name: "eth2"
      description: "Configured by Ansible - Interface 2 (ADMIN DOWN)"
      mtu: 600
      enable: false

populate:
  - name: "eth1"
    enable: true
    speed: "auto"
    duplex: "auto"
    description: "Configured by Ansible"
    mtu: 1500
    vifs:
      - vlan_id: "200"
        enable: true

  - name: "eth2"
    enable: true
    speed: "auto"
    duplex: "auto"
    description: "Configured by Ansible"
    mtu: 1500
    vifs:
      - vlan_id: "200"
        enable: true

  - name: "eth0"
    enable: true

replaced:
  commands:
    - "delete interfaces ethernet eth1 mtu"
    - "delete interfaces ethernet eth1 speed"
    - "delete interfaces ethernet eth1 duplex"
    - "delete interfaces ethernet eth1 vif 200"
    - "set interfaces ethernet eth1 description 'Replaced by Ansible'"
    - "set interfaces ethernet eth1 vif 100"
    - "set interfaces ethernet eth1 vif 100 description 'VIF 100 - Replaced by Ansible'"
    - "delete interfaces ethernet eth2 speed"
    - "delete interfaces ethernet eth2 duplex"
    - "delete interfaces ethernet eth2 vif 200"
    - "set interfaces ethernet eth2 description 'Replaced by Ansible'"
    - "set interfaces ethernet eth2 mtu '1400'"

  after:
    - name: "eth1"
      description: "Replaced by Ansible"
      enable: true
      vifs:
        - vlan_id: "100"
          enable: true
          description: "VIF 100 - Replaced by Ansible"

    - name: "eth2"
      mtu: 1400
      description: "Replaced by Ansible"
      enable: true

    - name: "eth0"
      enable: true

overridden:
  commands:
    - "delete interfaces ethernet eth1 description"
    - "delete interfaces ethernet eth1 speed"
    - "delete interfaces ethernet eth1 duplex"
    - "delete interfaces ethernet eth1 mtu"
    - "delete interfaces ethernet eth1 vif 200"
    - "delete interfaces ethernet eth2 speed"
    - "delete interfaces ethernet eth2 duplex"
    - "delete interfaces ethernet eth2 vif 200"
    - "set interfaces ethernet eth2 description 'Overridden by Ansible'"
    - "set interfaces ethernet eth2 mtu '1200'"

  after:
    - name: "eth0"
      enable: true

    - name: "eth1"
      enable: true

    - name: "eth2"
      enable: true
      description: "Overridden by Ansible"
      mtu: 1200

deleted:
  commands:
    - "delete interfaces ethernet eth1 description"
    - "delete interfaces ethernet eth1 speed"
    - "delete interfaces ethernet eth1 duplex"
    - "delete interfaces ethernet eth1 mtu"
    - "delete interfaces ethernet eth1 vif 200"
    - "delete interfaces ethernet eth2 description"
    - "delete interfaces ethernet eth2 speed"
    - "delete interfaces ethernet eth2 duplex"
    - "delete interfaces ethernet eth2 mtu"
    - "delete interfaces ethernet eth2 vif 200"

  after:
    - name: "eth0"
      enable: true

    - name: "eth1"
      enable: true

    - name: "eth2"
      enable: true
